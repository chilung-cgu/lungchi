# 2. 3Sum (ä¸‰æ•¸ä¹‹å’Œ)

| LeetCode | é›£åº¦ | æ¨™ç±¤ |
| :--- | :--- | :--- |
| [15. 3Sum](https://leetcode.com/problems/3sum/) | Medium | Array, Two Pointers, Sorting |

## é¡Œç›®æè¿° (Problem)

çµ¦ä½ ä¸€å€‹æ•´æ•¸é™£åˆ— `nums`ï¼Œæ‰¾å‡ºæ‰€æœ‰**å’Œç‚º 0** çš„**ä¸‰å…ƒçµ„ (triplets)** `[nums[i], nums[j], nums[k]]`ï¼Œå…¶ä¸­ `i != j`, `i != k`, `j != k`ã€‚
çµæœä¸å¯ä»¥åŒ…å«é‡è¤‡çš„ä¸‰å…ƒçµ„ã€‚

### ä¾‹å­ (Examples)
```cpp
Example 1:
Input: nums = [-1, 0, 1, 2, -1, -4]
Output: [[-1, -1, 2], [-1, 0, 1]]

Example 2:
Input: nums = [0, 0, 0]
Output: [[0, 0, 0]]
```

---

## ğŸ§  æ€è€ƒæ¨¡å¼ (Thinking Process)

### 1. æš´åŠ›è§£
ä¸‰å±¤å·¢ç‹€è¿´åœˆï¼Œ$O(n^3)$ã€‚å¤ªæ…¢ã€‚

### 2. å„ªåŒ–æ€è·¯ (æ’åº + Two Pointers)
é€™é¡Œæ˜¯ **Two Sum** çš„é€²éšç‰ˆã€‚æ ¸å¿ƒæ€è·¯æ˜¯ï¼š
*   å…ˆæŠŠé™£åˆ—æ’åº ($O(n \log n)$)ã€‚
*   å›ºå®šç¬¬ä¸€å€‹æ•¸ `nums[i]`ã€‚
*   å°æ–¼å‰©ä¸‹çš„éƒ¨åˆ† (`i+1` åˆ° `n-1`)ï¼Œç”¨ **Two Pointers** æ‰¾å‡ºå…©å€‹æ•¸åŠ èµ·ä¾†ç­‰æ–¼ `-nums[i]`ã€‚é€™å°±è®Šæˆä¸€å€‹ Two Sum II (Sorted Array) å•é¡Œï¼

### é—œéµï¼šå¦‚ä½•é¿å…é‡è¤‡ï¼Ÿ
*   å›ºå®š `i` æ™‚ï¼Œå¦‚æœ `nums[i] == nums[i-1]`ï¼Œè·³é (å› ç‚ºç”¨éåŒæ¨£çš„æ•¸ç•¶ç¬¬ä¸€å€‹äº†)ã€‚
*   å…§éƒ¨ Two Pointers æ‰¾åˆ°ç­”æ¡ˆå¾Œï¼Œ`L` å’Œ `R` ä¹Ÿè¦è·³éç›¸åŒçš„å€¼ï¼Œé¿å…ç”¢ç”Ÿé‡è¤‡çš„ä¸‰å…ƒçµ„ã€‚

---

## ğŸ“ å¾®æ­¥é©Ÿè¨ˆç•« (Micro-Steps)

1.  **æ’åºï¼š** `sort(nums.begin(), nums.end())`ã€‚
2.  **å¤–å±¤è¿´åœˆ (å›ºå®š i)ï¼š**
    *   å¾ `i = 0` åˆ° `n - 3` (å› ç‚ºå¾Œé¢é‚„è¦ç•™å…©å€‹æ•¸çµ¦ L, R)ã€‚
    *   **å»é‡ iï¼š** å¦‚æœ `i > 0 && nums[i] == nums[i-1]`ï¼Œ`continue`ã€‚
    *   **å°å„ªåŒ–ï¼š** å¦‚æœ `nums[i] > 0`ï¼Œå¾Œé¢ä¸å¯èƒ½æ¹Šå‡º 0 äº†ï¼Œå¯ä»¥æå‰ `break`ã€‚
3.  **å…§å±¤ Two Pointers (å›ºå®š i å¾Œ)ï¼š**
    *   `L = i + 1`, `R = n - 1`ã€‚
    *   `while (L < R)`ï¼š
        *   `threeSum = nums[i] + nums[L] + nums[R]`ã€‚
        *   å¦‚æœ `threeSum < 0`ï¼šå¤ªå°äº†ï¼Œ`L++`ã€‚
        *   å¦‚æœ `threeSum > 0`ï¼šå¤ªå¤§äº†ï¼Œ`R--`ã€‚
        *   å¦‚æœ `threeSum == 0`ï¼šæ‰¾åˆ°äº†ï¼
            *   åŠ å…¥çµæœã€‚
            *   **å»é‡ Lï¼š** `while (L < R && nums[L] == nums[L+1]) L++;`
            *   **å»é‡ Rï¼š** `while (L < R && nums[R] == nums[R-1]) R--;`
            *   `L++; R--;` ç¹¼çºŒæ‰¾ä¸‹ä¸€çµ„ã€‚
4.  **å›å‚³çµæœã€‚**

---

## ğŸ’» å¯¦ä½œç¨‹å¼ç¢¼ (C++)

```cpp
#include <vector>
#include <algorithm> // for std::sort

class Solution {
public:
    std::vector<std::vector<int>> threeSum(std::vector<int>& nums) {
        std::vector<std::vector<int>> result;
        
        // 1. æ’åº
        std::sort(nums.begin(), nums.end());
        int n = nums.size();

        // 2. å¤–å±¤è¿´åœˆå›ºå®š i
        for (int i = 0; i < n - 2; ++i) {
            // å°å„ªåŒ–ï¼šå¦‚æœæœ€å°çš„æ•¸éƒ½ > 0ï¼Œä¸å¯èƒ½æ¹Šå‡º 0
            if (nums[i] > 0) break;

            // å»é‡ i
            if (i > 0 && nums[i] == nums[i - 1]) continue;

            // 3. å…§å±¤ Two Pointers
            int L = i + 1;
            int R = n - 1;

            while (L < R) {
                int threeSum = nums[i] + nums[L] + nums[R];

                if (threeSum < 0) {
                    L++;
                } else if (threeSum > 0) {
                    R--;
                } else { // threeSum == 0
                    result.push_back({nums[i], nums[L], nums[R]});

                    // å»é‡ L
                    while (L < R && nums[L] == nums[L + 1]) L++;
                    // å»é‡ R
                    while (L < R && nums[R] == nums[R - 1]) R--;

                    L++;
                    R--;
                }
            }
        }

        return result;
    }
};
```

### è¤‡é›œåº¦åˆ†æ
*   **æ™‚é–“è¤‡é›œåº¦ï¼š$O(n^2)$** - å¤–å±¤ $O(n)$ï¼Œå…§å±¤ Two Pointers $O(n)$ã€‚æ’åºæ˜¯ $O(n \log n)$ï¼Œè¢« $O(n^2)$ æ¶µè“‹ã€‚
*   **ç©ºé–“è¤‡é›œåº¦ï¼š$O(1)$** - ä¸è¨ˆçµæœé™£åˆ—å’Œæ’åºæ‰€éœ€ç©ºé–“ã€‚

---

## ğŸ§ª è‡ªæˆ‘æª¢æ¸¬
*   [ ] ç‚ºä»€éº¼è¦æ’åºï¼Ÿ (1. è®“ Two Pointers èƒ½é‹ä½œã€‚2. æ–¹ä¾¿è·³éé‡è¤‡å…ƒç´ )ã€‚
*   [ ] `i > 0 && nums[i] == nums[i-1]` ç‚ºä»€éº¼è¦ `i > 0`ï¼Ÿ (é˜²æ­¢ i=0 æ™‚ `nums[i-1]` è¶Šç•Œ)ã€‚
*   [ ] æ‰¾åˆ°ç­”æ¡ˆå¾Œï¼Œç‚ºä»€éº¼ L å’Œ R éƒ½è¦è·³éé‡è¤‡å€¼å¾Œï¼Œ**é‚„è¦å† L++, R--**ï¼Ÿ (å› ç‚ºè·³éé‡è¤‡å€¼çš„ while åªæ˜¯æŠŠæŒ‡æ¨™åœåœ¨æœ€å¾Œä¸€å€‹é‡è¤‡å€¼ä¸Šï¼Œé‚„æ²’ç§»åˆ°ã€Œä¸‹ä¸€å€‹ä¸åŒçš„å€¼ã€)ã€‚
