# 1. Number of Islands (å³¶å¶¼æ•¸é‡)

| LeetCode | é›£åº¦ | æ¨™ç±¤ |
| :--- | :--- | :--- |
| [200. Number of Islands](https://leetcode.com/problems/number-of-islands/) | Medium | Array, DFS, BFS, Matrix, Union Find |

## é¡Œç›®æè¿° (Problem Statement)

çµ¦ä½ ä¸€å€‹ `m x n` çš„äºŒç¶­ç¶²æ ¼ `grid`ï¼Œè£¡é¢åªæœ‰å…©ç¨®å­—å…ƒï¼š
- `'1'` ä»£è¡¨é™¸åœ° (land)
- `'0'` ä»£è¡¨æ°´ (water)

**å³¶å¶¼** çš„å®šç¾©æ˜¯ï¼šç”±æ°´å¹³æˆ–å‚ç›´æ–¹å‘ç›¸é„°çš„é™¸åœ°é€£æ¥è€Œæˆï¼ˆå°è§’ç·šä¸ç®—ï¼‰ã€‚
ä½ å¯ä»¥å‡è¨­ç¶²æ ¼çš„å››å‘¨éƒ½æ˜¯è¢«æ°´åŒ…åœã€‚

è«‹è¨ˆç®—ç¶²æ ¼ä¸­æœ‰å¤šå°‘å€‹å³¶å¶¼ã€‚

### ä¾‹å­ (Examples)

```cpp
Example 1:
Input: grid = [
  ['1','1','1','1','0'],
  ['1','1','0','1','0'],
  ['1','1','0','0','0'],
  ['0','0','0','0','0']
]
Output: 1

Example 2:
Input: grid = [
  ['1','1','0','0','0'],
  ['1','1','0','0','0'],
  ['0','0','1','0','0'],
  ['0','0','0','1','1']
]
Output: 3
```

---

## ğŸ” æ·±åº¦åˆ†æ (Deep Analysis)

### å•é¡Œç´„æŸ (Constraints)
- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 300`
- `grid[i][j]` åªæœƒæ˜¯ `'0'` æˆ– `'1'`

### é‚Šç•Œæ¢ä»¶ (Edge Cases)
1. **ç©ºç¶²æ ¼ï¼š** å¦‚æœ `m = 0` æˆ– `n = 0`ï¼Œå›å‚³ `0`ã€‚
2. **å…¨æ˜¯æ°´ï¼š** åªæœ‰ `'0'`ï¼Œå›å‚³ `0`ã€‚
3. **å…¨æ˜¯é™¸åœ°ï¼š** åªæœ‰ `'1'`ï¼Œå›å‚³ `1`ï¼ˆæ•´å€‹ç¶²æ ¼æ˜¯ä¸€å€‹å¤§å³¶ï¼‰ã€‚
4. **å–®ä¸€æ ¼å­ï¼š** `1 x 1` çš„ç¶²æ ¼ï¼Œçœ‹æ˜¯ `'0'` é‚„æ˜¯ `'1'`ã€‚

### æ ¸å¿ƒæ´å¯Ÿ (Key Insight)
é€™å€‹å•é¡Œæœ¬è³ªä¸Šæ˜¯ **åœ–çš„é€£é€šåˆ†é‡å•é¡Œ (Connected Components)**ã€‚
- æ¯å€‹ `'1'` æ˜¯ä¸€å€‹ç¯€é»ã€‚
- ç›¸é„°çš„ `'1'` ä¹‹é–“æœ‰ä¸€æ¢é‚Šã€‚
- **æˆ‘å€‘è¦è¨ˆç®—æœ‰å¤šå°‘å€‹ç¨ç«‹çš„é€£é€šåˆ†é‡ã€‚**

---

## ğŸ’¡ æ€è·¯æ¼”é€² (Thought Process)

### ğŸ¤” å¦‚ä½•è­˜åˆ¥ä¸€å€‹å³¶å¶¼ï¼Ÿ

å‡è¨­æˆ‘å€‘ç«™åœ¨ä¸€å€‹ `'1'` ä¸Šï¼Œé€™å€‹ `'1'` å±¬æ–¼æŸå€‹å³¶å¶¼ã€‚
**å•ï¼šé€™å€‹å³¶å¶¼é‚„åŒ…å«å“ªäº›å…¶ä»–çš„ `'1'` å‘¢ï¼Ÿ**

**ç­”ï¼š** æ‰€æœ‰èˆ‡ç•¶å‰ `'1'` **ç›´æ¥æˆ–é–“æ¥ç›¸é„°** çš„ `'1'` éƒ½å±¬æ–¼åŒä¸€å€‹å³¶å¶¼ã€‚

é€™è®“æˆ‘å€‘è¯æƒ³åˆ°ä»€éº¼ï¼Ÿ**åœ–çš„éæ­·ï¼**
- å¾ä¸€å€‹ `'1'` å‡ºç™¼ï¼Œç”¨ DFS æˆ– BFS è¨ªå•æ‰€æœ‰ç›¸é„°çš„ `'1'`ã€‚
- è¨ªå•éçš„ `'1'` è¦æ¨™è¨˜ç‚ºã€Œå·²è¨ªå•ã€ï¼Œé¿å…é‡è¤‡è¨ˆç®—ã€‚

### ğŸ”„ æ¼”ç®—æ³•ç­–ç•¥

1. **å¤–å±¤æƒæï¼š** éæ­·æ•´å€‹ç¶²æ ¼çš„æ¯ä¸€å€‹æ ¼å­ `(i, j)`ã€‚
2. **ç™¼ç¾æ–°å³¶å¶¼ï¼š** å¦‚æœé‡åˆ°ä¸€å€‹ `'1'` ä¸”å°šæœªè¢«è¨ªå•ï¼š
   - é€™æ˜¯ä¸€å€‹æ–°å³¶å¶¼çš„èµ·é»ï¼
   - å³¶å¶¼è¨ˆæ•¸ `+1`ã€‚
   - ç”¨ DFS/BFS æŠŠé€™å€‹å³¶å¶¼çš„æ‰€æœ‰ `'1'` éƒ½æ¨™è¨˜ç‚ºå·²è¨ªå•ã€‚
3. **é‡è¤‡ï¼š** ç¹¼çºŒæƒæï¼Œç›´åˆ°éæ­·å®Œæ‰€æœ‰æ ¼å­ã€‚

---

## ğŸ¢ æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£ï¼Ÿ(Brute Force - å…¶å¯¦æ²’æœ‰çœŸæ­£çš„æš´åŠ›è§£)

é€™é¡Œæ²’æœ‰æ˜é¡¯çš„ã€Œæš´åŠ›è§£ã€ï¼Œå› ç‚ºæˆ‘å€‘å¿…é ˆéæ­·æ•´å€‹ç¶²æ ¼è‡³å°‘ä¸€æ¬¡ã€‚
ä½†æˆ‘å€‘å¯ä»¥æ€è€ƒ **éŒ¯èª¤çš„åšæ³•**ï¼š

### âŒ éŒ¯èª¤æƒ³æ³•ï¼šåªçœ‹æ¯å€‹æ ¼å­ï¼Œæ•¸æœ‰å¤šå°‘å€‹ `'1'`

é€™é¡¯ç„¶ä¸å°ï¼Œå› ç‚ºæˆ‘å€‘æœƒæŠŠå±¬æ–¼åŒä¸€å€‹å³¶å¶¼çš„å¤šå€‹ `'1'` é‡è¤‡è¨ˆç®—ã€‚

### âœ… æ­£ç¢ºæ€è·¯ï¼šç”¨åœ–éæ­·ã€Œåˆä½µã€ç›¸é„°çš„ `'1'`

é€™å°±æ˜¯æˆ‘å€‘çš„æœ€ä½³è§£ã€‚

---

## ğŸš€ æ–¹æ³•äºŒï¼šDFS (æ·±åº¦å„ªå…ˆæœå°‹) - æœ€ç›´è¦ºçš„è§£æ³•

### æ ¸å¿ƒæƒ³æ³•

- ç•¶æˆ‘å€‘é‡åˆ°ä¸€å€‹ `'1'` æ™‚ï¼Œå•Ÿå‹• DFS éè¿´ï¼ŒæŠŠæ‰€æœ‰ç›¸é„°çš„`'1'` éƒ½ã€Œæ·¹æ²’ã€ï¼ˆæ”¹æˆ `'0'` æˆ–æ¨™è¨˜ç‚ºå·²è¨ªå•ï¼‰ã€‚
- é€™æ¨£ï¼ŒåŒä¸€å€‹å³¶å¶¼åªæœƒè¢«è¨ˆç®—ä¸€æ¬¡ã€‚

### ç‚ºä»€éº¼ç”¨ DFSï¼Ÿ

å› ç‚º DFS çš„ã€Œæ·±å…¥ã€ç‰¹æ€§ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ¢ç´¢å®Œä¸€æ•´å€‹å³¶å¶¼çš„æ‰€æœ‰é€£é€šéƒ¨åˆ†ã€‚

---

## ğŸ’» å¯¦ä½œç¨‹å¼ç¢¼ (Implementation)

### Python ç‰ˆæœ¬

```python
from typing import List

class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        # é‚Šç•Œæ¢ä»¶ï¼šç©ºç¶²æ ¼
        if not grid or not grid[0]:
            return 0
        
        rows, cols = len(grid), len(grid[0])
        island_count = 0
        
        def dfs(r: int, c: int) -> None:
            """
            DFS éè¿´å‡½å¼ï¼šå°‡ç•¶å‰æ ¼å­åŠå…¶æ‰€æœ‰ç›¸é„°çš„é™¸åœ°æ¨™è¨˜ç‚ºå·²è¨ªå•
            
            åƒæ•¸:
                r: ç•¶å‰è¡Œç´¢å¼•
                c: ç•¶å‰åˆ—ç´¢å¼•
            """
            # Base case: è¶Šç•Œæˆ–é‡åˆ°æ°´/å·²è¨ªå•çš„æ ¼å­
            if (r < 0 or r >= rows or 
                c < 0 or c >= cols or 
                grid[r][c] == '0'):
                return
            
            # æ¨™è¨˜ç•¶å‰æ ¼å­ç‚ºå·²è¨ªå•ï¼ˆæ·¹æ²’å³¶å¶¼ï¼‰
            grid[r][c] = '0'
            
            # éè¿´æ¢ç´¢å››å€‹æ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰
            dfs(r - 1, c)  # ä¸Š
            dfs(r + 1, c)  # ä¸‹
            dfs(r, c - 1)  # å·¦
            dfs(r, c + 1)  # å³
        
        # ä¸»é‚è¼¯ï¼šéæ­·æ•´å€‹ç¶²æ ¼
        for i in range(rows):
            for j in range(cols):
                if grid[i][j] == '1':
                    # ç™¼ç¾æ–°å³¶å¶¼ï¼
                    island_count += 1
                    # ç”¨ DFS æ·¹æ²’æ•´å€‹å³¶å¶¼
                    dfs(i, j)
        
        return island_count
```

### C++ ç‰ˆæœ¬

```cpp
#include <vector>
using namespace std;

class Solution {
public:
    int numIslands(vector<vector<char>>& grid) {
        // é‚Šç•Œæ¢ä»¶ï¼šç©ºç¶²æ ¼
        if (grid.empty() || grid[0].empty()) {
            return 0;
        }
        
        int rows = grid.size();
        int cols = grid[0].size();
        int island_count = 0;
        
        // ä¸»é‚è¼¯ï¼šéæ­·æ•´å€‹ç¶²æ ¼
        for (int i = 0; i < rows; ++i) {
            for (int j = 0; j < cols; ++j) {
                if (grid[i][j] == '1') {
                    // ç™¼ç¾æ–°å³¶å¶¼ï¼
                    ++island_count;
                    // ç”¨ DFS æ·¹æ²’æ•´å€‹å³¶å¶¼
                    dfs(grid, i, j);
                }
            }
        }
        
        return island_count;
    }
    
private:
    /**
     * DFS éè¿´å‡½å¼ï¼šå°‡ç•¶å‰æ ¼å­åŠå…¶æ‰€æœ‰ç›¸é„°çš„é™¸åœ°æ¨™è¨˜ç‚ºå·²è¨ªå•
     * 
     * @param grid ç¶²æ ¼çš„å¼•ç”¨
     * @param r ç•¶å‰è¡Œç´¢å¼•
     * @param c ç•¶å‰åˆ—ç´¢å¼•
     */
    void dfs(vector<vector<char>>& grid, int r, int c) {
        int rows = grid.size();
        int cols = grid[0].size();
        
        // Base case: è¶Šç•Œæˆ–é‡åˆ°æ°´/å·²è¨ªå•çš„æ ¼å­
        if (r < 0 || r >= rows || 
            c < 0 || c >= cols || 
            grid[r][c] == '0') {
            return;
        }
        
        // æ¨™è¨˜ç•¶å‰æ ¼å­ç‚ºå·²è¨ªå•ï¼ˆæ·¹æ²’å³¶å¶¼ï¼‰
        grid[r][c] = '0';
        
        // éè¿´æ¢ç´¢å››å€‹æ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰
        dfs(grid, r - 1, c);  // ä¸Š
        dfs(grid, r + 1, c);  // ä¸‹
        dfs(grid, r, c - 1);  // å·¦
        dfs(grid, r, c + 1);  // å³
    }
};
```

---

## ğŸ¯ è¤‡é›œåº¦åˆ†æ (Complexity Analysis)

### æ™‚é–“è¤‡é›œåº¦ï¼šO(m Ã— n)
- **å¤–å±¤è¿´åœˆï¼š** éæ­·æ•´å€‹ç¶²æ ¼ä¸€æ¬¡ï¼š`O(m Ã— n)`ã€‚
- **DFS éæ­·ï¼š** 
  - æ¯å€‹æ ¼å­æœ€å¤šè¢«è¨ªå•ä¸€æ¬¡ï¼ˆå› ç‚ºè¨ªå•å¾Œç«‹åˆ»è®Šæˆ `'0'`ï¼‰ã€‚
  - æ‰€æœ‰ DFS å‘¼å«åŠ èµ·ä¾†ï¼Œç¸½å…±è¨ªå• `m Ã— n` å€‹æ ¼å­ã€‚
- **ç¸½å’Œï¼š** `O(m Ã— n)`ã€‚

### ç©ºé–“è¤‡é›œåº¦ï¼šO(m Ã— n)
- **éè¿´å †ç–Šæ·±åº¦ï¼š** 
  - æœ€å£æƒ…æ³ï¼šæ•´å€‹ç¶²æ ¼éƒ½æ˜¯é™¸åœ°ï¼ŒDFS æœƒä¸€è·¯éè¿´åˆ°åº•ã€‚
  - å †ç–Šæ·±åº¦æœ€å¤šç‚º `m Ã— n`ï¼ˆæƒ³åƒä¸€æ¢è›‡å½¢è·¯å¾‘ï¼‰ã€‚
- **åŸåœ°ä¿®æ”¹ï¼š** æˆ‘å€‘ç›´æ¥ä¿®æ”¹ `grid`ï¼Œæ²’æœ‰ä½¿ç”¨é¡å¤–çš„ `visited` é™£åˆ—ï¼Œç¯€çœäº†ç©ºé–“ã€‚

---

## ğŸ”„ æ–¹æ³•ä¸‰ï¼šBFS (å»£åº¦å„ªå…ˆæœå°‹)

DFS ä½¿ç”¨éè¿´ï¼ŒBFS ä½¿ç”¨ Queueã€‚å…©è€…æ™‚é–“è¤‡é›œåº¦ç›¸åŒï¼Œä½† BFS çš„ç©ºé–“è¤‡é›œåº¦åœ¨æŸäº›æƒ…æ³ä¸‹æ›´å¥½ï¼ˆå †ç–Šæ·±åº¦ä¸æœƒå¤ªæ·±ï¼‰ã€‚

### Python (BFS)

```python
from collections import deque

class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        if not grid or not grid[0]:
            return 0
        
        rows, cols = len(grid), len(grid[0])
        island_count = 0
        
        def bfs(r: int, c: int) -> None:
            """BFS ä½¿ç”¨ Queue éæ­·å³¶å¶¼"""
            queue = deque([(r, c)])
            grid[r][c] = '0'  # ç«‹åˆ»æ¨™è¨˜èµ·é»
            
            while queue:
                cur_r, cur_c = queue.popleft()
                
                # å››å€‹æ–¹å‘
                for dr, dc in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
                    nr, nc = cur_r + dr, cur_c + dc
                    
                    if (0 <= nr < rows and 
                        0 <= nc < cols and 
                        grid[nr][nc] == '1'):
                        grid[nr][nc] = '0'  # æ¨™è¨˜
                        queue.append((nr, nc))
        
        for i in range(rows):
            for j in range(cols):
                if grid[i][j] == '1':
                    island_count += 1
                    bfs(i, j)
        
        return island_count
```

---

## ğŸ§ª è‡ªæˆ‘æª¢æ¸¬ (Self-Check Questions)

1. **ç‚ºä»€éº¼æˆ‘å€‘è¦æŠŠè¨ªå•éçš„ `'1'` æ”¹æˆ `'0'`ï¼Ÿ**
   - é¿å…é‡è¤‡è¨ˆç®—ã€‚å¦‚æœä¸æ¨™è¨˜ï¼ŒåŒä¸€å€‹å³¶å¶¼æœƒè¢«è¨ˆç®—å¤šæ¬¡ã€‚

2. **èƒ½ä¸èƒ½ç”¨ä¸€å€‹é¡å¤–çš„ `visited` é™£åˆ—ï¼Ÿ**
   - å¯ä»¥ï¼ä½†é€™æœƒå¢åŠ  `O(m Ã— n)` çš„ç©ºé–“ã€‚ç›´æ¥ä¿®æ”¹ `grid` æ›´çœç©ºé–“ï¼ˆå¦‚æœé¡Œç›®å…è¨±ï¼‰ã€‚

3. **DFS å’Œ BFS å“ªå€‹æ›´å¥½ï¼Ÿ**
   - **DFS**ï¼šç¨‹å¼ç¢¼ç°¡æ½”ï¼Œä½†éè¿´æ·±åº¦å¯èƒ½å¾ˆæ·±ï¼ˆStack Overflow é¢¨éšªï¼‰ã€‚
   - **BFS**ï¼šç©ºé–“è¤‡é›œåº¦æ›´å¯æ§ï¼ˆQueue æœ€å¤šå­˜ä¸€å±¤çš„ç¯€é»ï¼‰ï¼Œä½†ç¨‹å¼ç¢¼ç¨é•·ã€‚

4. **å¦‚æœä¸èƒ½ä¿®æ”¹åŸå§‹ `grid` æ€éº¼è¾¦ï¼Ÿ**
   - ä½¿ç”¨ `set` æˆ–äºŒç¶­ `visited` é™£åˆ—è¨˜éŒ„è¨ªå•éçš„åº§æ¨™ã€‚

---

## ğŸ’¡ é “æ‚Ÿæ™‚åˆ» (Aha! Moment)

> **è˜‡æ ¼æ‹‰åº•å¼æå•ï¼š**  
> ã€Œç‚ºä»€éº¼é€™é¡Œçš„æ ¸å¿ƒä¸æ˜¯ã€æ•¸æœ‰å¤šå°‘å€‹ 1ã€ï¼Œ è€Œæ˜¯ã€æ•¸æœ‰å¤šå°‘å€‹é€£é€šåˆ†é‡ã€ï¼Ÿã€
>
> **ç­”ï¼š** å› ç‚ºæˆ‘å€‘è¦çš„ä¸æ˜¯é™¸åœ°çš„ã€Œæ•¸é‡ã€ï¼Œè€Œæ˜¯é™¸åœ°çš„ã€Œç¾¤çµ„æ•¸ã€ã€‚  
> é€™å€‹æ€ç¶­è½‰æ›ï¼Œå°±æ˜¯å¾ã€Œè¨ˆæ•¸ã€åˆ°ã€Œåœ–éæ­·ã€çš„é—œéµèºé€²ï¼

é€™ç¨®ã€Œå°‡äºŒç¶­ç¶²æ ¼è¦–ç‚ºåœ–ã€çš„æŠ½è±¡èƒ½åŠ›ï¼Œæ˜¯è§£æ±ºè¨±å¤šçŸ©é™£å•é¡Œçš„æ ¸å¿ƒæŠ€å·§ã€‚
